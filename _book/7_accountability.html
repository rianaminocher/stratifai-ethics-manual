<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Plan for Ethical and Trustworthy Design of the STRATIF-AI project - 7&nbsp; Accountability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./wp_tasks.html" rel="next">
<link href="./6_societal.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./7_accountability.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Accountability</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Plan for Ethical and Trustworthy Design of the STRATIF-AI project</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./framework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Framework</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workshops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Co-creation Workshops</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_oversight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Human Agency and Oversight</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_technical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Technical Robustness and Safety</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_privacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Privacy and Data Governance</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_transparency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Transparency</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_diversity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Diversity, Non-discrimination and Fairness</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./6_societal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Societal and Environmental Well-being</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_accountability.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Accountability</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wp_tasks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Work Packages</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#auditability" id="toc-auditability" class="nav-link active" data-scroll-target="#auditability"><span class="header-section-number">7.1</span> Auditability</a>
  <ul class="collapse">
  <li><a href="#altai-assessment" id="toc-altai-assessment" class="nav-link" data-scroll-target="#altai-assessment">ALTAI Assessment</a></li>
  <li><a href="#facilitate-auditability" id="toc-facilitate-auditability" class="nav-link" data-scroll-target="#facilitate-auditability"><span class="header-section-number">7.1.1</span> Facilitate auditability</a></li>
  <li><a href="#adhere-to-ethicalopen-research-norms" id="toc-adhere-to-ethicalopen-research-norms" class="nav-link" data-scroll-target="#adhere-to-ethicalopen-research-norms"><span class="header-section-number">7.1.2</span> Adhere to ethical/open research norms</a></li>
  </ul></li>
  <li><a href="#tradeoffs-risk-management" id="toc-tradeoffs-risk-management" class="nav-link" data-scroll-target="#tradeoffs-risk-management"><span class="header-section-number">7.2</span> Tradeoffs/ Risk-management</a>
  <ul class="collapse">
  <li><a href="#altai-assessment-1" id="toc-altai-assessment-1" class="nav-link" data-scroll-target="#altai-assessment-1">ALTAI Assessment</a></li>
  <li><a href="#institute-external-reporting-system" id="toc-institute-external-reporting-system" class="nav-link" data-scroll-target="#institute-external-reporting-system"><span class="header-section-number">7.2.1</span> Institute external reporting system</a></li>
  <li><a href="#collect-post-prediction-feedback" id="toc-collect-post-prediction-feedback" class="nav-link" data-scroll-target="#collect-post-prediction-feedback"><span class="header-section-number">7.2.2</span> Collect post-prediction feedback</a></li>
  <li><a href="#conduct-budget-impact-analysis" id="toc-conduct-budget-impact-analysis" class="nav-link" data-scroll-target="#conduct-budget-impact-analysis"><span class="header-section-number">7.2.3</span> Conduct budget impact analysis</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Accountability</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The principle of accountability highlights the need to establish mechanisms to guarantee responsibility throughout the lifecycle of AI systems. This principle intersects closely with risk management practices, which involve transparently identifying and mitigating risks that can be comprehended and audited by external parties. In instances where unjust or adverse impacts arise, accessible mechanisms for accountability must be established, to facilitate the opportunity for redress to affected parties.</p>
<section id="auditability" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="auditability"><span class="header-section-number">7.1</span> Auditability</h2>
<section id="altai-assessment" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="altai-assessment">ALTAI Assessment</h3>
<p>The auditability of STRATIF-AI’s workflow and system lifecycle is a fundamental aspect of our ethical plan. By creating a living document, we aim to establish a transparent and traceable log of all measures taken to adhere to ethical principles and legal requirements. To ensure the AI system can be audited by independent third parties, the ethical plan will be made available or disseminated accordingly.</p>
</section>
<section id="facilitate-auditability" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="facilitate-auditability"><span class="header-section-number">7.1.1</span> Facilitate auditability</h3>
<p><strong>Description</strong> <strong><em>Methodology</em></strong> to facilitate external audits of STRATIF-AI processes will be instituted and <strong><em>validated</em></strong>.</p>
<p><strong><em>Methodology:</em></strong> A publicly available and version-controlled ethical plan; <em>TBD</em><br>
<strong><em>validated:</em></strong> validated by Z-inspection process; validated within Delphi study</p>
<p><strong>Owner</strong></p>
<ul>
<li>WP3</li>
</ul>
<p><strong>Key Personnel</strong></p>
<ul>
<li>WP7</li>
<li>WP2</li>
</ul>
<p><strong>Schedule</strong> At any point, before end of project.</p>
<p><strong>Stroke Phase</strong> ALL</p>
<p><strong>Actionable tasks</strong></p>
<ul>
<li>appoint key personnel</li>
<li>define additional outputs?</li>
<li>discuss site prototype and any legal barriers</li>
<li>solicit feedback on prototype</li>
<li>create sub-page to report important parameters</li>
<li>define important parameters</li>
<li>e.g.&nbsp;traceability of the development process, the sourcing of training data and the logging of the AI system’s processes, outcomes, positive and negative impact</li>
<li>make pages public</li>
</ul>
</section>
<section id="adhere-to-ethicalopen-research-norms" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2" class="anchored" data-anchor-id="adhere-to-ethicalopen-research-norms"><span class="header-section-number">7.1.2</span> Adhere to ethical/open research norms</h3>
<p><strong>Description</strong> Research work produced by the STRATIF-AI consortium must adhere to EU Horizon funding guidelines as well as ethical norms regarding the <strong><em>data availability</em></strong>, <strong><em>reproducibility</em></strong>, <strong><em>open access</em></strong>, <strong><em>distribution</em></strong>, <strong><em>confidentiality</em></strong> and <strong><em>originality</em></strong> of published work.</p>
<p><strong><em>data availability:</em></strong> data made available in Zenodo repository; data adheres to FAIR principles; data is labelled as clearly associated research publication<br>
<strong><em>reproducibility:</em></strong> scientific code is made available on Github; scientific code is made available on Zenodo<br>
<strong><em>open access:</em></strong> research published under “gold” open access standards; research published in journal with CC-BY license<br>
<strong><em>distribution:</em></strong> authorship roles are allocated within CRediT taxonomy; fraudulent authorship is prevented (“guest”, “gift”, “ghost”); authors meet minimum authorship criteria;<br>
<strong><em>confidentiality:</em></strong> sensitive information about patients is protected; permission from primary author must be obtained before dissemination;<br>
<strong><em>originality:</em></strong> use of any AI-assisted technology is disclosed; reference to published/unoriginal work is appropriately cited;</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Further information on the CRediT taxonomy for assigning authorship is available online at https://credit.niso.org. The Royal Society Publishing Editorial team also provides tips on publishing ethics here https://royalsociety.org/blog/2022/03/authorship-contributions-disputes-misconduct/.</p>
</div>
</div>
<p><strong>Owner</strong></p>
<ul>
<li>WP3</li>
</ul>
<p><strong>Key Personnel</strong></p>
<ul>
<li>all WP leads</li>
</ul>
<p><strong>Schedule</strong> At any point, before end of project.</p>
<p><strong>Stroke Phase</strong> ALL</p>
<p><strong>Actionable tasks</strong></p>
<ul>
<li>appoint key personnel</li>
<li>create publication guide, to be signed before publication by authors</li>
<li>implement SOP for publication within consortium</li>
</ul>
</section>
</section>
<section id="tradeoffs-risk-management" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="tradeoffs-risk-management"><span class="header-section-number">7.2</span> Tradeoffs/ Risk-management</h2>
<section id="altai-assessment-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="altai-assessment-1">ALTAI Assessment</h3>
<p>It is essential to identify, assess, document, and mitigate potential negative impacts of AI systems, particularly for those directly or indirectly affected. Safeguards must be in place to protect whistleblowers, NGOs, trade unions, and other entities reporting legitimate concerns about AI systems. As part of WP3 within the STRATIF-AI project, we will conduct an external Z-inspection assessment, which is a gold-standard and validated methodology to assess the ethical impacts of an AI tool. A comprehensive risk training protocol will be designed and adhere to any legal protocols. Our ethical plan has been designed in concordance with the Assessment List for Trustworthy AI (ALTAI), and, as such, will be continually evaluated throughout the AI system’s lifecycle.</p>
<p>While implementing these requirements, tensions may arise, necessitating inevitable trade-offs. We will identify relevant interests and values implicated by the AI system and explicitly evaluate trade-offs in terms of their risk to safety and ethical principles, including fundamental rights. These decisions will be thoroughly documented throughout our ethical audit process. Additionally, a a process for third parties (e.g.&nbsp;suppliers, end-users, subjects, distributors/vendors or workers) to report potential vulnerabilities, risks or biases in the AI system, and a following risk management protocol will be instituted. Accessible mechanisms to ensure adequate redress will be established.</p>
</section>
<section id="institute-external-reporting-system" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="institute-external-reporting-system"><span class="header-section-number">7.2.1</span> Institute external reporting system</h3>
<p><strong>Description</strong> A system for <strong><em>third-parties</em></strong> to make reports about <strong><em>risks</em></strong> should be established within the platform and <strong><em>periodically</em></strong> be evaluated.</p>
<p><strong><em>third-parties:</em></strong> citizens; hospital workers; developers; <em>any contributors of technology or data</em><br>
<strong><em>risks:</em></strong> vulnerabilities; errors; concerns<br>
<strong><em>periodically:</em></strong> <em>TBD</em></p>
<p><strong>Stroke Phase</strong> ALL</p>
<p><strong>Owner</strong></p>
<ul>
<li>WP2</li>
</ul>
<p><strong>Key Personnel</strong></p>
<ul>
<li>design staff</li>
<li>technical staff</li>
<li>WP3</li>
</ul>
<p><strong>Actionable tasks</strong></p>
<ul>
<li>appoint key personnel</li>
<li>define all parameters</li>
<li>define link to feedback reporting loop</li>
<li>implement/design procedure</li>
<li>feedback from third parties to validate</li>
<li>test system</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In relation to requirement 6.3.1, it will be necessary to solicit and encourage feedback from non-users and potential users to mitigate risks of misuse or under-user of the STRATIF-AI platform.</p>
</div>
</div>
</section>
<section id="collect-post-prediction-feedback" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="collect-post-prediction-feedback"><span class="header-section-number">7.2.2</span> Collect post-prediction feedback</h3>
<p><strong>Description</strong> A system for <strong><em>end-users</em></strong> to provide feedback about <strong><em>medical applicability</em></strong> should be established within the platform.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is closely related to the requirement 1.2.2 <a href="./1_oversight.html">Human Agency and Oversight</a>; Institute reporting feedback loop.</p>
</div>
</div>
<p><strong><em>end-users:</em></strong> medical professionals<br>
<strong><em>medical applicability:</em></strong> effectiveness; relevance; alignment with evolving medical knowledge and practices;</p>
<p><strong>Stroke Phase</strong> EACH (3)</p>
<p><strong>Owner</strong></p>
<ul>
<li>WP4</li>
<li>WP5</li>
<li>WP6</li>
</ul>
<p><strong>Key Personnel</strong></p>
<ul>
<li>medical staff</li>
<li>design staff</li>
<li>technical staff</li>
</ul>
<p><strong>Actionable tasks</strong></p>
<ul>
<li>appoint key personnel</li>
<li>medical professionals to define key parameters</li>
<li>prototype for system/information parameters</li>
<li>implementation by WP2/ design staff</li>
<li>design and validate system</li>
</ul>
</section>
<section id="conduct-budget-impact-analysis" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="conduct-budget-impact-analysis"><span class="header-section-number">7.2.3</span> Conduct budget impact analysis</h3>
<p><strong>Description</strong> The economic justification of the implementation of the STRATIF-AI platform for different <strong><em>stakeholders</em></strong> must be made via cost-benefit analyses.</p>
<p><strong><em>stakeholders:</em></strong> hospitals; insurance companies; patients; rehab centers; <em>any affected institutional parties?</em></p>
<p><strong>Stroke Phase</strong> EACH (3)</p>
<p><strong>Owner</strong></p>
<ul>
<li>WP7</li>
</ul>
<p><strong>Key Personnel</strong></p>
<ul>
<li>medical staff</li>
</ul>
<p><strong>Actionable tasks</strong></p>
<ul>
<li>appoint key personnel</li>
<li>define parameters</li>
<li>design budget impact/ cost-benefit analysis study</li>
<li>conduct analysis</li>
<li>report results</li>
<li>publication/dissemination of results</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./6_societal.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Societal and Environmental Well-being</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./wp_tasks.html" class="pagination-link">
        <span class="nav-page-text">Work Packages</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>